import &ArtStandardLib, &Lib

testAll = ->
  loadAllPackages()
  .then (packages) ->
    array {scripts}, packagePath in packages when scripts.test
      packagePath

  .then (packagePaths) ->
    Promise.all array packagePath in packagePaths
      log TEST: packagePath
      execShellCommand "" cd #{packagePath};npm test
      .then
        -> log        PASS: packagePath
        -> log.error  FAIL: packagePath
