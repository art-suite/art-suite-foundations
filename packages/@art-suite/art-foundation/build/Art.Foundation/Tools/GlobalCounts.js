// Generated by CoffeeScript 1.12.7
(function() {
  var GlobalCounts, StandardLib, currentSecond, isPlainObject, log;

  StandardLib = require('art-standard-lib');

  isPlainObject = StandardLib.isPlainObject, currentSecond = StandardLib.currentSecond, log = StandardLib.log;

  module.exports = GlobalCounts = (function() {
    var globalTime;

    function GlobalCounts() {}

    GlobalCounts.globalCounts = {};

    globalTime = null;

    GlobalCounts.resetGlobalCounts = function() {
      globalTime = currentSecond();
      return GlobalCounts.globalCounts = {};
    };

    GlobalCounts.globalCount = function(name, amount) {
      var k, last, results, v;
      if (amount == null) {
        amount = 1;
      }
      if (isPlainObject(amount)) {
        if (last = GlobalCounts.globalCounts[name]) {
          results = [];
          for (k in amount) {
            v = amount[k];
            results.push(last[k] += v);
          }
          return results;
        } else {
          return GlobalCounts.globalCounts[name] = amount;
        }
      } else {
        return GlobalCounts.globalCounts[name] = (GlobalCounts.globalCounts[name] || 0) + amount;
      }
    };

    GlobalCounts.countStep = function() {
      var nextTime;
      nextTime = currentSecond();
      if (nextTime - globalTime > .002) {
        log.error("GlobalCounts gap");
      }
      globalTime = nextTime;
      return GlobalCounts.globalCount("step");
    };

    return GlobalCounts;

  })();

}).call(this);

//# sourceMappingURL=GlobalCounts.js.map
