"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["log", "currentSecond", "Promise", "isFunction", "namespace"], [global, require('./StandardImport'), require('./Log')], (log, currentSecond, Promise, isFunction, namespace) => {let logPromiseProblems; return {logPromise: function(context, p) {let startTime; if (!(p != null)) {p = context; context = "(context not specified)";}; log({logPromise_start: context}); startTime = currentSecond(); return Promise.then(() => isFunction(p) ? p() : p).tap((result) => log({logPromise_success: {context, result, seconds: currentSecond() - startTime}})).tapCatch((error) => log.error({logPromise_error: {context, error, seconds: currentSecond() - startTime}}));}, logPromiseProblems: logPromiseProblems = function(context, p) {let log, currentSecond, startTime; ({log, currentSecond} = namespace); startTime = currentSecond(); return Promise.then(() => isFunction(p) ? p() : p).tapCatch((error) => log.error({logRejectedPromises: {context, error, seconds: currentSecond() - startTime}}));}, logPromiseErrors: logPromiseProblems, logRejectedPromises: logPromiseProblems};});});
//# sourceMappingURL=LogPromise.js.map
