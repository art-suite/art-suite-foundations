"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["Promise", "log", "findAllNonDomainCharactersRegexp", "simpleValidDomainRegexp"], [global, require('./StandardImport'), require('./RegExp')], (Promise, log, findAllNonDomainCharactersRegexp, simpleValidDomainRegexp) => {let getDomain; return {findEmailDomain: function(domain, verbose) {return Promise.withCallback((callback) => require('dns').resolveMx(domain, callback)).then((dnsAddresses) => {let result, lowestPriority; if (verbose >= 2) {log({domain, dnsAddresses});}; result = null; lowestPriority = 0; Caf.each2(dnsAddresses, ({priority, exchange}) => (!(result != null) || priority < lowestPriority) ? (lowestPriority = priority, result = exchange) : undefined); return result;});}, getDomain: getDomain = function(email) {let username, domain; ([username, domain] = email.split("@")); return !findAllNonDomainCharactersRegexp.test(domain) && simpleValidDomainRegexp.test(domain) && domain || null;}};});});
//# sourceMappingURL=DomainValidation.js.map
