import &StandardImport

date = new Date milliseconds = 1497123141167
roundedIntDiv1000 = (v) -> (v / 1000) + .5 | 0
seconds = roundedIntDiv1000 milliseconds
values = {date, seconds, milliseconds}

suite: ->
  each value, valueName in values
    test "toSeconds #{valueName}" ->
      assert.isNumber v = toSeconds value
      assert.eq seconds, v

    test "toMilliseconds #{valueName}" ->
      assert.isNumber v = toMilliseconds value
      assert.ok abs(milliseconds - v) < 1000

    test "toDate #{valueName}" ->
      assert.isDate v = toDate value
      assert.ok abs(v - milliseconds) < 1000

  test "toSeconds null" -> assert.eq null, toSeconds null
  test "toMilliseconds null" -> assert.eq null, toMilliseconds null
  test "toDate null" -> assert.eq null, toDate null

  test "formatDate" ->
    assert.eq "Sat Jun 10 2017 12:32:21", formatDate seconds
    assert.eq "Sat Jun 10 2017 12:32:21", formatDate milliseconds
    assert.eq "Sat Jun 10 2017 12:32:21", formatDate date
