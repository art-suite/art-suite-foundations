import &StandardImport

suite:
  unsupportedObjects: ->

    test 'my Foo class - one property', ->
      class Foo
        constructor: ->
          @bar = 123

        ignoreMe: ->
      assert.eq
        formattedInspect bar: 123
        "bar: 123"

      assert.eq
        formattedInspect new Foo
        "Foo {} bar: 123"

    test 'my Foo class - multiple property', ->
      class Foo
        constructor: ->
          @bar =
          @baz =
          @bom = "" This is just fine, right? Just a little longer.

        ignoreMe: ->
      assert.eq
        formattedInspect {bar: 123}, maxLineLength: 80
        "bar: 123"

      assert.eq
        formattedInspect (new Foo), maxLineLength: 80
        """
          Foo {}
            bom: "This is just fine, right? Just a little longer."
            baz: "This is just fine, right? Just a little longer."
            bar: "This is just fine, right? Just a little longer."

  recursion: ->

    test :self-reference ->
      selfR = {}
      selfR.self = selfR
      assert.eq formattedInspect(selfR), "self: <<< self reference"

    test :parent-reference ->
      backR = child: {}
      backR.child.parent = backR
      assert.eq formattedInspect(backR), "child: parent: <<< parent reference"

    test :grandparent-reference ->
      backR = child: grandchild: {}
      backR.child.grandchild.grandparent = backR
      assert.eq formattedInspect(backR), "child: grandchild: grandparent: <<< grandparent reference"

    test :grandparent-reference ->
      backR = child: grandchild: greatgrandchild: {}
      backR.child.grandchild.greatgrandchild.greatgrandparent = backR
      assert.eq formattedInspect(backR), "child: grandchild: greatgrandchild: greatgrandparent: <<< great grandparent reference"

    test :grandparent-reference ->
      backR = child: grandchild: greatgrandchild: greatgreatgrandchild: {}
      backR.child.grandchild.greatgrandchild.greatgreatgrandchild.greatgreatgrandparent = backR
      assert.eq formattedInspect(backR), "child: grandchild: greatgrandchild: greatgreatgrandchild: greatgreatgrandparent: <<< 4 generations back reference"
